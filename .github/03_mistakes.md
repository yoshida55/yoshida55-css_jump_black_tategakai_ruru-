# 03_mistakes.md（俺の落とし穴・ミス対策）

## ■ 【逆引き】よくある症状から原因を特定する

| 症状（見た目） | 疑うべき原因 | 対策 |
|----------------|--------------|------|
| 子要素が親の外にはみ出している | Flexbox の `align-items: stretch`（初期値）で高さが引き伸ばされている | 親に `align-items: flex-start` を追加 |
| `absolute` の要素が画面外に飛んでいく | 親に `position: relative` がない | 基準にしたい親に `relative` を追加 |
| `margin` や `width` が効かない | 対象がインライン要素（`a`, `span`）である | `display: block` または `inline-block` を追加 |
| 背景画像が表示されない | CSS のパスが `../img/` になっていない | `url("../img/...")` に修正 |
| フォントサイズがおかしい | `html` の基準サイズ設定が抜けている | `02_layouts.md` の計算式を適用 |

---



## ■ パスとファイル管理のミス
* **背景画像のパス（../）忘れ**:
    - **現象**: CSSで `background-image` を指定しても画像が出ない。
    - **原因**: CSSファイルから見ると、画像フォルダは「一つ上の階層」にある。
    - **対策**: `url("img/...")` ではなく `url("../img/...")` と書く。
* **フォントサイズ設定の忘れ**:
    - **現象**: 文字サイズが想定より大きすぎる/小さすぎる。
    - **原因**: `html` タグへの基準サイズ（`1400px` 基準の計算式など）を `style.css` に書き忘れている、または読み込めていない。

## ■ レイアウト崩れの罠（CSS）
* **Absoluteの「親リラティブ」忘れ**:
    - **現象**: `absolute` を指定した要素が、とんでもない場所に飛んでいく。
    - **原因**: 親要素（または基準にしたい枠）に `position: relative;` が入っていないため、画面全体（body）を基準にしてしまっている。
* **Flex内の画像が勝手に伸びる**:
    - **現象**: 画像の高さが、隣にあるテキストボックスの高さに合わせてビヨーンと伸びてしまう。
    - **原因**: Flexboxの初期値が `align-items: stretch`（高さ合わせ）になっているから。
    - **対策**: 親のFlexコンテナに `align-items: flex-start;` を指定して、上揃え（本来の高さ）にする。
* **インライン要素（a, span）の余白無視**:
    - **現象**: `a` タグに `margin-top` や `width` を指定しても効かない。
    - **原因**: インライン要素はサイズや縦の余白を持てない仕様。
    - **対策**: `display: block;` または `display: inline-block;` を指定する。
* **Wrapper（外枠）のサイズ指定ミス**:
    - **現象**: デザインカンプは幅 `1400px` なのに、左右の余白が大きすぎる。
    - **原因**: 以前の癖で、Wrapperの `max-width` を `1200px` などに設定したままコピペしていた。
    - **教訓**: カンプの最大幅（1400pxなど）を必ず確認してからコーディングに入る。

## ■ 縦書き・特殊レイアウトの失敗ログ
* **❌ 失敗パターン（親で縦書き）**:
    ```css
    .news_area {
      writing-mode: vertical-rl; /* 親に設定してしまう */
      display: flex;
      flex-direction: row-reverse;
    }
    ```
    - **何が起きる**: Flexの軸（X軸/Y軸）も一緒に回転してしまい、`justify-content` などの挙動が予測不能になり、配置が崩壊する。
* **✅ 正解パターン（子だけ縦書き）**:
    - 親は `display: flex; flex-direction: row-reverse;` （横書き設定のまま配置のみ反転）。
    - 中の `h2` や `p` にだけ `writing-mode: vertical-rl;` をかける。
    - **覚え方**: 「親は配置（Flex）」「子は文字の向き（writing-mode）」と役割を分ける。

## ■ 構造上のミス（HTML）
* **見出し（h2等）の中にdivを入れる**:
    - **ルール**: `h2` などの見出しタグの中には、インライン要素（`span` や `a`）しか置けない。
    - **NG**: `<h2><div>タイトル</div></h2>`
    - **OK**: `<h2><span class="ja">タイトル</span></h2>`
* **Prettierの誤爆とリカバリ**:
    - **現象**: Prettierが効かず、タグのインデントがぐちゃぐちゃになる、あるいはPrettierが変な壊し方をする。
    - **対策**: 自分で直そうとせず、すぐに Copilot にコードを投げて「タグを整形して」と頼むのが最速。

## ■ 思考・ワークフローの改善
* **「頑張って配置する」のは間違い**:
    - 1px単位で `top` や `left` をいじったり、ネガティブマージンで調整し始めたら、やり方が間違っているサイン。
    - `flex` の整列や `writing-mode` の自動配置で「勝手に並ぶ」方法を探す。
* **手書きメモの書き方（設計時）**:
    - 画面の図の中に文字をごちゃごちゃ書かない。
    - 画面の下に「クラス名」を書き出し、そこに「プロパティ」をリスト化して整理する。
    - こうすることで、クラスごとの役割（親なのか子なのか）が明確になる。
* **不要なFlex指定**:
    - 子要素が一つだけなのに `display: flex` をかけてしまう癖を直す。無駄なコードはバグの元。